<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Users | Hero&trade; - Solving The Heroin Crisis</title>
		<meta charset="utf-8">
 		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<style>
			body{
				font-family: 'Lato', sans-serif;
				background-color:#9FC5DF;
			}
			#map {
       			 	height: 465px;
        			width: 760px;
       		}
			.container {
				margin: 0% auto;
			}
			#navBarText{
				font-size:1.3em;
			}
			#chatbot{
				margin:0;
				padding:0;
				float:left;
			}
			#myCarousel{
				padding:0;
				margin:0;
			}
			.navbar {
				margin-bottom:0;
				border-radius:0;
				padding:1% 0;
				border:0;
				background-color:#9FC5DF;
				color:#A9E0FF;
			}
			.navbar-inverse .navbar-nav .active a, .navbar-inverse .navbar-nav .active a:focus,.navbar-inverse .navbar-nav .active a:hover{
				color:#A9E0FF;
				background-color: #9FC5DF;
			}
			.navbar-inverse .navbar-nav li a {
				color:#A9E0FF;
			}
			h5{
				font-size: 20;
			}
			.navbar-inverse .navbar-nav .active a, .navbar-inverse .navbar-nav .active a:focus,.navbar-inverse .navbar-nav .active a:hover{
				color:#FFF;
				background-color: #5;
				font-size:20;
			}
			footer{
	width: 100%;
	background-color: #9FC5DF;
	padding:0;
	margin:0;
	color:white;
}

.fa{
	padding: 15px;
	font-size: 25px;
	color:#A9E0FF;
}
.fa:hover{
	color:#FFF;
	text-decoration:none;
}
		</style>
	</head>
	<body>
		<nav class="navbar navbar-inverse">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<!--<a class="navbar-brand" href="#"><img src="img/icon.png">/</a>-->
									<div class="padding">
  					<div class="container">
    					<div class="row">
      						<div class="col-lg-1 col-md-1 col-sm-2 col-xs-3">
      							<a href="index.html">
        							<img src="img/logo.png" class="img-responsive">
        						</a>
      						</div>
      					</div>
  					</div>
				</div>
				</div>
				<div class="collapse navbar-collapse" id="myNavbar">
   					<ul class="nav navbar-nav navbar-right">
      					<li class="active" id="navBarText"><a href="#">Users</a></li>
      					<li id="navBarText"><a href="community.html">Non-Users</a></li>
    				</ul>
				</div>
			</div>
		</nav>
		<div id="myCarousel" class="carousel slide" data-ride="carousel">
			<ol class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1"></li>
				<li data-target="#myCarousel" data-slide-to="2"></li>
			</ol>
			<div class="carousel-inner" role="listbox">
				<div class="item active">
					<img src="img/med1.jpg">
					  <div class="carousel-caption d-none d-md-block">
   						<h1>There is help.</h1>
   						<p>Click below to access Selina, your personal assistant.</p>
 					 </div>
				</div>
				<div class="item">
					<img src="img/med2.jpg">
					  <div class="carousel-caption d-none d-md-block">
   						 <h1>Find resources close to you.</h1>
   						 <p>Use the map below to find needles, clinics and more.</p>
 					 </div>
				</div>
				<div class="item">
					<img src="img/med3.png">
					  <div class="carousel-caption d-none d-md-block">
   						 <h1>You can help others.</h1>
   						 <p>Visit the non-users landing page to report needles & donate.</p>
 					 </div>
				</div>
			</div>
			<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
				<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
				<span class="sr-only">Previous</span>
			</a>
			<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
				<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
				<span class="sr-only">Next</span>
			</a>
		</div>
		<div class="container-fluid" id="some-row">
			<div class="row">
				<div id="chatbot" class="col-md-6">
				<iframe
    				height=500;
    				width=100%;
    				src="https://console.dialogflow.com/api-client/demo/embedded/3b6f38dd-22fa-477c-9b06-6941bf5988d1">
				</iframe>
				</div>
				<div class="col-md-6" id="not-chatbot">
					<div class="row">
						<div class="btn-group" style="width:768px" role="group" aria-label="Map Features">
							<button type="button" style="width:33%" id="drug-therapy" class="btn btn-info" onclick="searchFor('drug therapy');">Drug Therapy</button>
							<button type="button" style="width:33%" id="clinics" class="btn btn-info" onclick="searchFor('clinic');">Clinics</button>
							<button type="button" style="width:33%" id="hospitals" class="btn btn-info" onclick="searchFor('hospital');">Hospitals</button>
						</div>
					</div>
					<div class="row">
						<div id="map"></div>
    <script>
      var map;
      var pos={lat: 43.643, lng: -79.387};
      var infowindow;
      var clinicMarkers = [];
      var hospitalMarkers = [];
      var therapyMarkers = [];
      var currentSearch ="";
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 43.643, lng: -79.387},
          zoom: 10
        });

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            map.setCenter(pos);
          }, function() {
          }); 
        }

        infowindow = new google.maps.InfoWindow();
      }

      function searchFor(user_key){
      	currentSearch=user_key;
      	if (clinicMarkers.length != 0){
      		for (i = 0; i < clinicMarkers.length; i++){
      			clinicMarkers[i].setMap(null);
      		}
      		clinicMarkers=[];
      	}
      	if (therapyMarkers.length != 0){
      		for (i = 0; i < therapyMarkers.length; i++){
      			therapyMarkers[i].setMap(null);
      		}
      		therapyMarkers=[];
      	}
      	if (hospitalMarkers.length != 0){
      		for (i = 0; i < hospitalMarkers.length; i++){
      			hospitalMarkers[i].setMap(null);
      		}
      		hospitalMarkers=[];
      	}
      	var service = new google.maps.places.PlacesService(map);
          service.nearbySearch({
            location: pos,
            radius: 25000,
            keyword: user_key
          }, callback);
      }

      function callback(results, status) {
        if (status === google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            createMarker(results[i]);
          }
        }
      }

      function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map: map,
          position: place.geometry.location
        });

        if (currentSearch='clinic'){
        	clinicMarkers.push(marker);
        } else if (currentSearch='hospital'){
        	hospitalMarkers.push(marker);
        } else if (currentSearch='drug therapy'){
        	therapyMarkers.push(marker);
        }

        google.maps.event.addListener(marker, 'click', function() {
          infowindow.setContent(place.name);
          infowindow.open(map, this);
        });
      }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBwc_EJb0SdDd3jsysJsNxh5iEr8x1wdJU&libraries=places&callback=initMap"
    async defer></script>
					</div>
				</div>
			</div>
		</div>

	<footer class="container-fluid text-center">
		<div class="row">
			<div class="col-sm-4">
				<h3>Contact Us</h3>
				<br>
				<h4>HeroHeadquarters</h4>
				<h4>230 Sarnia Rd, London, ON</h4>
				<h4>(647) 708-7304</h4>
			</div>
			<div class="col-sm-4">
				<h3>Connect</h3>
				<a href="#" class="fa fa-facebook"></a>
				<a href="#" class="fa fa-twitter"></a>
				<a href="#" class="fa fa-google"></a>
				<a href="#" class="fa fa-linkedin"></a>
				<a href="#" class="fa fa-youtube"></a>
			</div>
			<div class="col-sm-4">
				<img src="img/logo.png" class="icon" float="right" width=40% height=40%>
			</div>
		</div>
	</footer>		
	</body>
</html>